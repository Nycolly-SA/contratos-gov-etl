## ğŸ“Š Pipeline ETL + AnÃ¡lise de Dados (Contratos Governamentais)

VER.1 
Este projeto implementa um **pipeline ETL (Extract, Transform, Load)** para coleta, tratamento e anÃ¡lise de dados pÃºblicos do portal ([Dados Abertos](https://dados.gov.br/home)

VER.1.1
O objetivo Ã© simular um fluxo de dados real, extraindo contratos e seus itens, transformando-os e carregando-os em um banco de dados, para posterior anÃ¡lise em dashboards interativos (via **Streamlit**).

VER.1.2
O objetivo Ã© simular um fluxo de dados real, extraindo contratos e informaÃ§Ãµes complementares, tratando e carregando-os em banco de dados para posterior anÃ¡lise.


VER.2
Este projeto implementa um pipeline ETL (Extract, Transform, Load) para dados de contratos governamentais disponibilizados pela API pÃºblica ComprasGov ([Dados Abertos](https://dados.gov.br/home) do Governo Brasileiro).

O foco inicial estÃ¡ na extraÃ§Ã£o e organizaÃ§Ã£o dos contratos pÃºblicos do ano de 2024, com posterior transformaÃ§Ã£o, carga e anÃ¡lise.

### InformaÃ§Ãµes Gerais
#### ğŸ”§ Tecnologias Utilizadas
- **Python 3.12+**  
- **Pandas**  
- **Requests**  
- **PostgreSQL** *(planejado)*  
- **Streamlit** *(planejado)*  
#### ğŸ”— Fontes de Dados
- Postman Docs -> https://documenter.getpostman.com/view/13166820/2sA3XJjPpR?utm_source=chatgpt.com#
- Swagger UI -> https://dadosabertos.compras.gov.br/swagger-ui/index.html?utm_source=chatgpt.com#

#### ğŸ“ Estrutura do Projeto
````
src/
 â”œâ”€â”€ extract.py       # MÃ³dulo de extraÃ§Ã£o (funÃ§Ãµes para API)
 â”œâ”€â”€ main.py          # OrquestraÃ§Ã£o do pipeline
 â””â”€â”€ transform.py     # (em construÃ§Ã£o) FunÃ§Ãµes de transformaÃ§Ã£o
data/
 â””â”€â”€ raw/             # Dados brutos extraÃ­dos em CSV
````

#### ğŸš€ Como Executar
````
# 1. Clonar o repositÃ³rio
git clone https://github.com/SEU-USUARIO/contratos-gov-etl.git
cd contratos-gov-etl

# 2. Instalar dependÃªncias
pip install -r requirements.txt

# 3. Executar o pipeline
python src/main.py
````

## âš™ï¸ Pipeline

### ğŸ” ExtraÃ§Ã£o
A etapa de extraÃ§Ã£o utiliza 3 endpoints principais da API:
1. `1_consultarContratos`
- Retorna informaÃ§Ãµes detalhadas sobre contratos (nÃºmero, objeto, vigÃªncia, Ã³rgÃ£os participantes, etc.).
- Ã‰ o endpoint principal do projeto.
- EstratÃ©gia adotada:
- Para evitar viÃ©s e respeitar limites da API (500 registros/pÃ¡gina), foi feita amostragem estratificada por trimestre.
- Por padrÃ£o, cada trimestre retorna atÃ© 5.000 contratos, totalizando cerca de 20.000 contratos.
- O ano de referÃªncia (ex.: 2024) e o nÃºmero de contratos por trimestre sÃ£o parÃ¢metros configurÃ¡veis no cÃ³digo, podendo ser ajustados conforme a necessidade do usuÃ¡rio.

2. `1_consultarUasg`
- Fornece informaÃ§Ãµes sobre as UASGs (Unidades Administrativas de ServiÃ§os Gerais).
- Tentou-se inicialmente extrair apenas UASGs vinculadas aos contratos, mas a API sÃ³ aceita consulta de um registro por vez â†’ inviÃ¡vel.
- SoluÃ§Ã£o adotada: extrair todas as UASGs e filtrar posteriormente na transformaÃ§Ã£o.
- ObservaÃ§Ã£o: este endpoint sofre alteraÃ§Ãµes frequentes (UASGs sendo criadas, ativadas ou desativadas).

3. `2_consultarOrgao`
- Retorna dados sobre os Ã³rgÃ£os governamentais responsÃ¡veis pelos contratos.
- SituaÃ§Ã£o semelhante ao endpoint de UASG: consulta unitÃ¡ria inviÃ¡vel.
- SoluÃ§Ã£o adotada: extrair todos os Ã³rgÃ£os e filtrar depois.
- ObservaÃ§Ã£o: este endpoint tambÃ©m sofre alteraÃ§Ãµes ao longo do tempo (Ã³rgÃ£os sendo ativados/desativados).

#### ğŸ“‚ Estrutura de SaÃ­da (ExtraÃ§Ã£o)
- `contratos_amostra_YYYY-MM-DD.csv` â†’ Amostra estratificada de contratos (por trimestre)
- `uasg_YYYY-MM-DD.csv` â†’ Dados completos de UASGs
- `orgao_YYYY-MM-DD.csv` â†’ Dados completos de Ã³rgÃ£os

### ğŸ”œ PrÃ³ximas Etapas
- Finalizar a fase de TransformaÃ§Ã£o (limpeza, padronizaÃ§Ã£o, filtragem dos dados de UASG e Ã³rgÃ£os).
- Implementar a fase de Carga (armazenamento em banco de dados relacional).
- Realizar anÃ¡lises exploratÃ³rias e criaÃ§Ã£o de KPIs.
- Construir dashboard interativo para visualizaÃ§Ã£o.